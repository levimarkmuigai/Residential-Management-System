<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landlord Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/landlord.css" />
</head>
<body>

    <div class="container">
        
        <header class="dashboard-header">
            <h1 class="main-title">DASHBOARD</h1>
        </header>

        <div class="action-bar">
            <button id="show-form-button" class="action-btn yellow-btn">
                REGISTER BUILDING
            </button>
            <button id="profile-link" class="action-btn yellow-btn">
                EDIT PROFILE
            </button>
            <button id="admin-btn" class="action-btn yellow-btn">
                ADMINISTRATION
            </button>
        </div>

        <div class="card-container hidden" id="register-container">
            <div class="card-header">
                <h2>REGISTER YOUR BUILDING</h2>
            </div>
            <div class="card-content">
                <form action="http://127.0.0.1:8080/register_b" method="POST">
                    <div class="form-row">
                        <div class="field">
                            <label>BUILDING NAME</label>
                            <input type="text" name="building">
                        </div>
                        <div class="field">
                            <label>TOTAL UNITS</label>
                            <input type="number" placeholder="00" name="units">
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">ADD TO SYSTEM</button>
                </form>
            </div>
        </div>

        <div class="card-container hidden" id="profile-section">
            <div class="card-header">
                <h2>EDIT PROFILE</h2>
            </div>
            <div class="card-content">
                <form action="http://127.0.0.1:8080/update_landlord" method="POST">
                    <div class="field">
                        <label>BUSINESS NAME</label>
                        <input type="text" name="name">
                    </div>
                    <button type="submit" class="submit-btn">SAVE CHANGES</button>
                </form>
            </div>
        </div>

         <div class="card-container hidden" id="admin-section">
            <div class="card-header">
                <h2>ADMINISTRATION</h2>
            </div>
            <div class="card-content">
                <h3>ASSIGN CARETAKER</h3>
                <form action="/landlord/assign_caretaker" method="POST">
                    <div class="form-row">
                        <div class="field">
                            <label>AVAILABLE CARETAKERS</label>
                            <select name="caretaker_id">
                                <option value="" disabled selected>SELECT PERSON</option>
                                {{CARETAKER_OPTIONS}}
                            </select>
                        </div>

                        <div class="field">
                            <label>TARGET BUILDING</label>
                            <select name="building_id">
                                <option value="" disabled selected>SELECT BUILDING</option>
                                {{BUILDINGS}}
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">ASSIGN NOW</button>
                </form>
            </div>
        </div>

        <div class="card-container">
            <div class="card-header">
                <h2>BUILDING INVENTORY</h2>
            </div>
            <div class="table-wrapper">
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>BUILDING NAME</th>
                            <th class="text-center">UNITS (OCC/TOT)</th>
                            <th class="text-right">CARETAKER</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{BUILDING_ROWS}} 
                    </tbody>
                </table>
            </div>
        </div> 

    </div>

    <script>
        const togglePanel = (btnId, panelId) => {
            const btn = document.getElementById(btnId);
            const panel = document.getElementById(panelId);
            
            if(btn && panel) {
                btn.addEventListener('click', (e) => {
                    e.preventDefault(); 
                    document.querySelectorAll('.card-container.hidden')
                        .forEach(el => el.classList.add('hidden'));

                    panel.classList.toggle('hidden');
                    
                    if(btnId === 'show-form-button') {
                        btn.innerText = panel.classList.contains('hidden') ? 
                            'REGISTER BUILDING' : 'CLOSE FORM';
                    }
                    if(btnId === 'profile-link') {
                        btn.innerText = panel.classList.contains('hidden') ? 
                            'EDIT PROFILE' : 'CLOSE PROFILE';
                    }
                    if(btnId === 'admin-btn') {
                        btn.innerText = panel.classList.contains('hidden') ? 
                            'ADMINISTRATION' : 'CLOSE ADMIN';
                    }
                });
            }
        }

        togglePanel('show-form-button', 'register-container');
        togglePanel('profile-link', 'profile-section');
        togglePanel('admin-btn', 'admin-section');
    </script>
</body>
</html>
